import os
import telebot
from telebot.types import ReplyKeyboardMarkup, KeyboardButton

TOKEN = os.getenv("TOKEN")
bot = telebot.TeleBot(TOKEN)

tasks = [
    "1. –í–æ—Ç –º—ã —Å —Ç–æ–±–æ–π –Ω–∞–∫–æ–Ω–µ—Ü –∏ –¥–æ–º–∞. –ù–∞—á–Ω–µ–º —Å –ø—Ä–∏—Ö–æ–∂–µ–π. –ò–¥–∏ –∫ –∑–µ—Ä–∫–∞–ª—É –∏ —Ä–∞–∑–¥–µ–Ω—å—Å—è. –û—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –±–µ–ª—å–µ. –°–Ω–∏–º–∏ –≤–∏–¥–µ–æ –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ.",
    "2. –£–º–Ω–∏—á–∫–∞ üòè. –¢–µ–ø–µ—Ä—å –∏–¥–∏ —Ç—É–¥–∞, –≥–¥–µ —Ç—ã –ª—é–±–∏—à—å –∫—Ä–∞—Å–∏—Ç—å—Å—è. –°—è–¥—å –∏–ª–∏ –≤—Å—Ç–∞–Ω—å –Ω–∞–ø—Ä–æ—Ç–∏–≤ –∑–µ—Ä–∫–∞–ª–∞ –∏ –Ω–∞—á–Ω–∏ –º–µ–¥–ª–µ–Ω–Ω–æ —Ç—Ä–æ–≥–∞—Ç—å —Å–µ–±—è. –ù–µ –∑–∞–±—ã–≤–∞–π, —á—Ç–æ –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞ —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ.",
    "3. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —è —Ä—è–¥–æ–º. –°–Ω–∏–º–∏ —Å —Å–µ–±—è –ª–∏—Ñ—á–∏–∫ –∏ –ø–æ–∫–∞–∂–∏ –∫–∞–∫ –±—ã —Ç—ã —Å–µ–π—á–∞—Å –≤–∑—è–ª–∞ –≤ —Ä–æ—ÇüëÖ",
    "4. –¢–µ–ø–µ—Ä—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–π—Å—è –Ω–∞ –∫—É—Ö–Ω—é, —Ç–∞–º —Ç–µ–±—è –∂–¥–µ—Ç –±–æ–∫–∞–ª. –í—ã–ø–µ–π –µ–≥–æ –Ω–µ —Å–ø–µ—à–∞, —Å—è–¥—å –Ω–∞ —Å—Ç–æ–ª –∏–ª–∏ —Å—Ç—É–ª –∏ –ø—Ä–∏–∫–æ—Å–Ω–∏—Å—å –∫ —Å–µ–±–µ —á–µ—Ä–µ–∑ —Ç—Ä—É—Å–∏–∫–∏. –ú–µ–¥–ª–µ–Ω–Ω–æ, –Ω–µ–∂–Ω–æ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∑–∞–≤–µ–¥–∏ –º–µ–Ω—èü•µ",
    "5. –Ø —É–∂–µ —Å—Ö–æ–∂—É —Å —É–º–∞ –≥–ª—è–¥—è –Ω–∞ —ç—Ç–æ üòÆ‚Äçüí®. –î–æ–±–µ–π –º–µ–Ω—è, —Å–Ω–∏–º–∏ —Ç—Ä—É—Å–∏–∫–∏ –∏ —Ä–∞–∑–¥–≤–∏–Ω—å –Ω–æ–≥–∏, –∫–∞–∫ –±—É–¥—Ç–æ —è —É–∂–µ –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–∞—é –≤—ã–ø–∏—Ç—å –µ—â–µ –±–æ–∫–∞–ªüçë",
    "6. –û—Å—Ç–∞–ª–æ—Å—å –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ, –¢–∏–∞—Ä–æ—á–∫–∞. –ü–µ—Ä–µ–π–¥–∏ –≤ —Å–ø–∞–ª—å–Ω—é, —Ä–∞—Å–ø–æ–ª–æ–∂–∏—Å—å –ø–æ—É–¥–æ–±–Ω–µ–µ –∏ –Ω–∞—á–Ω–∏ –ª–∞—Å–∫–∞—Ç—å —Å–µ–±—è, –Ω–æ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–π. –•–æ—á—É –≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ —Ç–≤–æ–µ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µüí¶",
    "üî• –§–∏–Ω–∞–ª: –ø—Ä–∏—à–ª–∏ –º–Ω–µ –≤–∏–¥–µ–æ, –≥–¥–µ —Ç—ã –≥–ª–∞–¥–∏—à—å —Å–µ–±—è –∏ –≥–æ–≤–æ—Ä–∏—à—å, —á—Ç–æ —Ö–æ—á–µ—à—å –º–µ–Ω—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –ü–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–Ω–æ—é –≤–∏–¥–µ–æ - –≤—Å—Ç–∞–≤–∞–π –∏ –∏–¥–∏ –∫–æ –º–Ω–µ. –Ø –¥–∏–∫–æ —Ç–µ–±—è —Ö–æ—á—É –∏ –∂–¥—É."
]

# ‚è± –•—Ä–∞–Ω–∏–º, –Ω–∞ –∫–∞–∫–æ–º –∑–∞–¥–∞–Ω–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
user_progress = {}

# üü¢ –ö–æ–º–∞–Ω–¥–∞ /start ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫–Ω–æ–ø–∫–∞
@bot.message_handler(commands=['start'])
def start(message):
    user_id = message.chat.id
    user_progress[user_id] = 0

    # –ö–Ω–æ–ø–∫–∞
    markup = ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add(KeyboardButton("‚û°Ô∏è –°–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ"))

    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
    welcome_text = (
        "–ü—Ä–∏–≤–µ—Ç, –ª—é–±–∏–º–∞—è üíã\n\n"
        "–°–µ–≥–æ–¥–Ω—è —Ç–µ–±—è –∂–¥—ë—Ç –ø—Ä–∏–≤–∞—Ç–Ω–∞—è –∏–≥—Ä–∞.\n"
        "–í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è –æ–¥–Ω–æ –∑–∞ –¥—Ä—É–≥–∏–º. –ú–µ–¥–ª–µ–Ω–Ω–æ. –ö—Ä–∞—Å–∏–≤–æ.\n"
        "–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ ‚Äî –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø—Ä–∏—Å—ã–ª–∞—Ç—å –º–Ω–µ –≤–∏–¥–µ–æ, –∏–Ω–∞—á–µ –æ–Ω–æ –Ω–µ –±—É–¥–µ—Ç –∑–∞—Å—á–∏—Ç–∞–Ω–æ.\n\n"
        "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑ —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ - –Ø, –≤ –ø–æ–ª–Ω–æ–º —Ç–≤–æ–µ–º —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏."
    )

    bot.send_message(user_id, welcome_text, reply_markup=markup)

# üîÅ –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É
@bot.message_handler(func=lambda message: message.text == "‚û°Ô∏è –°–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ")
def next_task(message):
    user_id = message.chat.id
    step = user_progress.get(user_id, 0)

    if step < len(tasks):
        bot.send_message(user_id, tasks[step])
        user_progress[user_id] = step + 1
    else:
        bot.send_message(user_id, "ü•µ –í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –ñ–¥—É —Ç–µ–±—è...")

bot.polling(none_stop=True, interval=0, timeout=20)
